<!DOCTYPE html>
<!-- saved from url=(0060)http://fiddle.jshell.net/aybalasubramanian/38L5C/show/light/ -->
<html><script id="tinyhippos-injected">if (window.top.ripple) { window.top.ripple("bootstrap").inject(window, document); }</script><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  
  <title>Packery - resize item "flashing" bug in iOS - jsFiddle demo by aybalasubramanian</title>
  
  <script type="text/javascript" src="dummy.js"></script><style type="text/css"></style>
  
  
  
  
  <link rel="stylesheet" type="text/css" href="result-light.css">
  
    
      <script type="text/javascript" src="packery.pkgd.js"></script>
    
  
  <style type="text/css">
    * {
  -webkit-box-sizing: border-box;
     -moz-box-sizing: border-box;
          box-sizing: border-box;
}

body { font-family: sans-serif; }

.packery {
  background: #FDD;
  background: hsla(45, 100%, 40%, 0.2);
  max-width: 520px;
}

/* clearfix */
.packery:after {
  content: ' ';
  display: block;
  clear: both;
}

.item,
.item-content {
  width: 60px;
  height: 60px;
}

.item-content {
  width: 60px;
  height: 60px;
  background: #09D;
  border: 4px solid #333;
  border-color: hsla(0, 0%, 100%, 0.4);
  -webkit-transition: width 0.4s, height 0.4s;
     -moz-transition: width 0.4s, height 0.4s;
       -o-transition: width 0.4s, height 0.4s;
          transition: width 0.4s, height 0.4s;
}

/* both item and item content change size */
.item.is-expanded,
.item.is-expanded .item-content {
  width: 180px;
  height: 120px;
}

.item:hover { cursor: pointer; }

.item:hover .item-content {
  border-color: white;
}

.item.is-expanded {
  z-index: 2;
}

.item.is-expanded .item-content {
  background: #C90;
}
  </style>
  
</head>
<body>
  <h1>Packery - resize item "flashing" bug in iOS</h1>
<p class="instruction">View on iOS, and see "flashing" issue when item is toggled.</p>
<div class="packery" style="position: relative; height: 120px;">
  <div class="item" style="position: absolute; left: 0px; top: 0px;">
    <div class="item-content"></div>
  </div>
  <div class="item" style="position: absolute; left: 60px; top: 0px;">
    <div class="item-content"></div>
  </div>
  <div class="item" style="position: absolute; left: 120px; top: 0px;">
    <div class="item-content"></div>
  </div>
  <div class="item" style="position: absolute; left: 180px; top: 0px;">
    <div class="item-content"></div>
  </div>
  <div class="item" style="position: absolute; left: 240px; top: 0px;">
    <div class="item-content"></div>
  </div>
  <div class="item" style="position: absolute; left: 300px; top: 0px;">
    <div class="item-content"></div>
  </div>
  <div class="item" style="position: absolute; left: 360px; top: 0px;">
    <div class="item-content"></div>
  </div>
  <div class="item" style="position: absolute; left: 420px; top: 0px;">
    <div class="item-content"></div>
  </div>
  <div class="item" style="position: absolute; left: 0px; top: 60px;">
    <div class="item-content"></div>
  </div>
  <div class="item" style="position: absolute; left: 60px; top: 60px;">
    <div class="item-content"></div>
  </div>
  <div class="item" style="position: absolute; left: 120px; top: 60px;">
    <div class="item-content"></div>
  </div>
  <div class="item" style="position: absolute; left: 180px; top: 60px;">
    <div class="item-content"></div>
  </div>
  <div class="item" style="position: absolute; left: 240px; top: 60px;">
    <div class="item-content"></div>
  </div>
  <div class="item" style="position: absolute; left: 300px; top: 60px;">
    <div class="item-content"></div>
  </div>
  <div class="item" style="position: absolute; left: 360px; top: 60px;">
    <div class="item-content"></div>
  </div>
</div>
  


<script type="text/javascript">//<![CDATA[ 

// http://packery.metafizzy.co/packery.pkgd.js added as external resource

docReady( function() {
  var container = document.querySelector('.packery');
  var pckry = new Packery( container );

  var itemElems = pckry.getItemElements();

  for ( var i=0, len = itemElems.length; i < len; i++ ) {
    var itemElem = itemElems[i];
    eventie.bind( itemElem, 'click', onItemElemClick );
  }

  function onItemElemClick( event ) {
    // don't proceed if item content was not clicked on
    var target = event.target;
    if ( !classie.has( target, 'item-content' )  ) {
      return;
    }
    var itemElem = target.parentNode;
    var isExpanded = classie.has( itemElem, 'is-expanded' );
    classie.toggleClass( itemElem, 'is-expanded' );
  
    if ( isExpanded ) {
      // if shrinking, just layout
      pckry.layout();
    } else {
      // if expanding, fit it
      pckry.fit( itemElem );
    }
  }

});

//]]>  

</script>







</body></html>